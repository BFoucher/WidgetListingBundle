{% extends 'VictoireCoreBundle:Widget:edit.html.twig' %}


{% block form_picker %}
    {{ block('form_widget') }}
        {{ form_widget(form.items.vars.prototype.entity)|raw }}
    <ul id="{{form.items.vars.attr.id}}-listing">
        {% for item in form.items %}
            {% include "VictoireWidgetListingBundle::showItem.html.twig" with {'item': item.vars.data, 'entity_name': form.items.vars.attr.id, 'entity_id': item.vars.data.entity.id, 'entity': item.vars.data} %}
        {% endfor %}
    </ul>
    {% do form.items.setRendered %}
{% endblock form_picker %}

{% block form_query %}
    {{form_row(form.query)}}
{% endblock form_query %}

{% block form_static %}
        <ul class="items" data-prototype="{{ form_widget(form.items.vars.prototype)|e }}">
            {{form_row(form.items)}}
        </ul>
{% endblock form_static %}

{% block form %}
    <ul id="{{form.items.vars.attr.id}}-listing"></ul>
    {{ parent() }}
    <script type="text/javascript">
        $(document).ready(function(){
            {% if form.items.vars.attr.id != 'static' %}
                initListWidgetForm("{{form.items.vars.attr.id}}");
            {% else %}
                initStaticListWidgetForm("{{form.items.vars.attr.id}}");
            {% endif %}
        });
      </script>
{% endblock form %}
