{% extends 'VictoireCmsBundle:Widget:new.html.twig' %}

{% block form %}

    {% if form.items.vars.attr.id != 'static' %}
      {{form_row(form.fields)}}
        {{ block('form_widget') }}

            {{ form_widget(form.items.vars.prototype.entity)|raw }}
      <ul id="{{form.items.vars.attr.id}}-listing"></ul>
    {% else %}
      <ul class="items" data-prototype="{{ form_widget(form.items.vars.prototype)|e }}">
      {{form_row(form.items)}}
    </ul>
    {% endif %}

    {{form_rest(form)}}

<script type="text/javascript">
    $(document).ready(function(){
        {% if form.items.vars.attr.id != 'static' %}
            initListWidgetForm("{{form.items.vars.attr.id}}");
        {% else %}
            initStaticListWidgetForm("{{form.items.vars.attr.id}}");
        {% endif %}
    });
  </script>
{% endblock form %}
